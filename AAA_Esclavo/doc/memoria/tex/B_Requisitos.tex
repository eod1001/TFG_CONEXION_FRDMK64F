\apendice{Especificación de Requisitos} \label{ch:especificacion}

\section{Introducción} \label{sec:spec-intro}
En este apéndice de especificación de requisitos del \extranjerismo{software}
se proporciona una descripción completa del propósito y funcionalidad del
\extranjerismo{software}. Se detallan las funciones que debe realizar el
\extranjerismo{software} y se muestran casos de uso de como los usuarios
utilizarán el \extranjerismo{software}.

También sirve para definir cómo tiene que interactuar el 
\extranjerismo{software} con el \extranjerismo{hardware} y con otros
\extranjerismo{softwares}. Además, sirve para definir otros requisitos de
carácter no funcional.

Para realizar la especificación de requisitos del \extranjerismo{software}
The Institute of Electrical and Electronics Engineers (IEEE) ha publicado
varios estándares al respecto, IEEE 830-1998 \cite{webpage:ieee830-1998}
y IEEE 29148-2011 \cite{webpage:ieee29148-2011} \footnote{Actualizado
recientemente a IEEE 29148-2018 \cite{webpage:ieee29148-2018}.}.
La especificación de requisitos del \extranjerismo{software} se realizará
siguiendo algunas de las indicaciones de estos estándares.

\subsection{Identificación} \label{sec:spec-id}
Este apéndice sirve para especificar los requisitos del \extranjerismo{software}
realizado en el proyecto. Es decir:
\begin{itemize}
  \item El \extranjerismo{software} utilizado por un sistema empotrado para 
  realizar transmisiones TCP/IP.
  \item El \extranjerismo{software} utilizado por la aplicación web para 
  realizar transmisiones TCP/IP con destino al sistema.
\end{itemize}

Está previsto que ambos \extranjerismo{softwares} se publiquen con la versión
1.0 y en este documento se describe su funcionalidad.

\subsection{Audiencia destinataria}
\label{sec:spec-audiencia}
Como audiencia destinataria de este documento se incluye cualquier persona
interesada en el proyecto. Tanto tutor, evaluadores, usuarios, como futuros
desarrolladores interesados en conocer la funcionalidad del
\extranjerismo{software} del sistema empotrado y del \extranjerismo{software}
de la aplicación web.

\subsection{Abreviaciones} \label{sec:spec-abreviaciones}
\begin{description}
  \item[Sistema empotrado:] SE
  \item[\extranjerismo{Software} del sistema empotrado:] SW del SE
  \item[Aplicación web:] AW
  \item[\extranjerismo{Software} de la aplicación web:] SW de la AW
  \item[Requisito de interfaces externas:] RE 
  \item[Requisito funcional:] RF
  \item[Requisito no funcional:] RNF
  \item[Caso de uso:] CU
\end{description}

\section{Objetivos generales}
El proyecto cuenta con los siguientes objetivos en relación al funcionamiento
del SE y de la AW.

\begin{itemize}
  \item Configurar un SE que sea capaz de conectarse en red usando TCP/IP.
  \item El SW del SE tiene que realizar varias acciones sobre el
        \extranjerismo{hardware}.
  \item Desarrollar una AW que pueda comunicarse con el SE enviando comandos
        via TCP/IP.
  \item El SW de la AW tiene que ordenar la ejecución de las funciones del SE.
\end{itemize}

\subsection{Clases de usuario y características} \label{sec:spec-usuarios}
Cualquier persona interesada en sistemas empotrados puede ser usuaria del SE y
de la AW. Además, no se requerirán conocimientos avanzados ni experiencia técnica
para su uso. Bastará con conectar el SE y utilizar la AW.

\subsection{Entorno operativo} \label{sec:spec-entorno}
Por un lado, el SE require de un servidor DHCP para obtener una dirección IP
que le permita comunicarse con el resto de los dispositivos de la red.

Por el otro, para acceder a la AW solo se requiere de un navegador sin importar
si es un equipo de sobremesa o en un dispositivo móvil. Sin embargo,
si el usuario desea ejecutar la AW por si mismo, se requiere de un sistema
que cuente con un servidor de aplicaciones como GlassFish.

\subsection{Documentación del usuario} \label{sec:spec-docs}
Junto con el \extranjerismo{software} se proporciona la memoria que describe
el desarrollo, además de varios apéndices con información complementaria. En
concreto, los usuarios pueden consultar el apéndice con el manual de usuario
\ref{ch:man-user} que cuenta con indicaciones para el uso del
\extranjerismo{software}.



\section{Catálogo de requisitos} \label{sec:requisitos}


\subsection{Requisitos de interfaces externas} \label{sec:spec-interfaces}
\subsubsection{Interfaces de usuario} \label{sec:spec-interfaces-usuario}
\begin{itemize}
  \item \textbf{RE-1 Acceso web} El usuario debe poder interactuar con el SE
  mediante una interfaz web.
\end{itemize}

\subsubsection{Interfaces de \extranjerismo{hardware}}
\label{sec:spec-interfaces-hw}
\begin{itemize}
  \item \textbf{RE-2 Acceso a la red} El SE tiene que ser capaz de usar
  Ethernet. RE de alta prioridad.
  \item \textbf{RE-3 Transmisiones en red} El SE tiene que ser capaz de usar
  TCP/IP. RE de alta prioridad.
  \item \textbf{RE-4 Uso de LED} El SE tiene que ser capaz de usar LED. RE de
  alta prioridad.
  \item \textbf{RE-5 Uso de I\textsuperscript{2}C} El SE tiene que ser
  capaz de usar I\textsuperscript{2}C. RE de alta prioridad.
  \item \textbf{RE-3 Uso de PWM} El SE tiene que ser capaz de usar PWM. RE de
  alta prioridad.
\end{itemize}

\subsubsection{Requisitos funcionales del SW del SE}
\label{sec:spec-funcionales-se}
\begin{itemize}
  \item \textbf{RF-1 Recepción de comandos} El SE tiene que recibir comandos
  transmitidos mediante paquetes TCP con destino a su correspondiente dirección
  IP y puerto TCP abierto. RF de alta prioridad.
  \item \textbf{RF-2 Identificación de comandos} El SE tiene que se capaz de
  identificar los comandos recibidos para poder ejecutar las acciones correctas.
  RF de alta prioridad.
  \item \textbf{RF-3 Acción sobre los LED RGB} El SE tiene que poder variar
  los colores producidos por los LED RGB. RF de alta prioridad.
  \item \textbf{RF-4 Acción sobre el LCD} El SE tiene que poder mostrar
  cadenas de caracteres en el LCD. RF de alta prioridad.
  \item \textbf{RF-5 Acción sobre los LED PWM} El SE tiene que poder regular
  la intensidad del brillo de los LED mediante PWM. RF de alta prioridad.
\end{itemize}

\subsubsection{Requisitos funcionales del SW de la AW}
\label{sec:spec-funcionales-aw}
\begin{itemize}
  \item \textbf{RF-6 Selección del SE} El usuario debe poder seleccionar el SE 
  con el que desea interactuar. La selección se realiza introduciendo la
  dirección IP y el puerto del SE en uso. RF de alta prioridad.
  \item \textbf{RF-7 Envío de comandos} La aplicación tiene que ser capaz de
  construir comandos inteligibles por el SE y que realicen las operaciones
  indicadas por el usuario. RF de alta prioridad.
  \item \textbf{RF-8 Selección del color} El usuario debe poder escoger un color
  a ser iluminado por los LED RGB. RF de alta prioridad.
  \item \textbf{RF-9 Introducción de mensajes} El usuario debe poder introducir
  las cadenas de caracteres a mostrar por el LCD. RF de alta prioridad.
  \item \textbf{RF-10 Regulación del brillo} El usuario debe poder regular la
  intensidad del brillo de los LED PWM. RF de alta prioridad.
\end{itemize}

\subsubsection{Requisitos no funcionales del SE y de la AW}
\label{sec:spec-nofuncionales}
\begin{itemize}
  \item \textbf{RNF-1 \extranjerismo{hardware}  del SE} El SE tiene que ser
  desarrollado con una placa de desarrollo FRDM-K64F. RNF de alta prioridad.
  \item \textbf{RNF-2 Rendimiento del SE} El SE tiene que ser capaz de realizar
  las acciones indicadas por el usuario sin demora. RNF de media prioridad.
  \item \textbf{RNF-3 Seguridad del SE} El SE tiene que asegurar que sus
  componentes no presentan riesgos eléctricos al usuario. RNF de alta prioridad.
  \item \textbf{RNF-4 Calidad del SW} El SW tiene que garantizar cierto nivel
  de calidad, p. ej., incluyendo comentarios que faciliten su comprensión para
  un mantenimiento o portabilidad posteriores. RNF de media prioridad.
  \item \textbf{RNF-5 Experiencia de usuario} La AW debe poder adaptarse a
  los diferentes dispositivos desde los que se pueda acceder. RNF de media
  prioridad.
\end{itemize}

\bigskip

\section{Especificación de requisitos} \label{sec:especificacion}
\subsection{Diagrama de Casos de uso} \label{sec:diag-casos-uso}
Con el actor se representa a cualquier usuario de la AW. La aplicación se
encargará de transmitir los comandos a través de una red usando TCP/IP.
Los comandos serán procesador por el SE para realizar la acción oportuna.

\figuraApaisadaSinMarco{0.9}{casos}{Diagrama de Casos de uso}{fig:casos-uso}{}
 
\subsection{Casos de uso} \label{sec:casos-uso}
\tablaSmallSinColores{CU-1 Seleccionar SE}{l l}{cu-1}
{\multicolumn{1}{l}
{CU-1}                          & Seleccionar SE \\}
{ 
  \textbf{Versión}              & 1.0     \\
  \textbf{Fecha}                & 2018-11 \\
  \textbf{Requisitos asociados} & RF-6    \\
  \textbf{Descripción}          & El usuario introduce en la AW la dirección IP\\ 
                                & y el puerto TCP abierto por el SE. \\
  \textbf{Precondición}         & El usuario debe consultar los datos\\
                                & en la pantalla LCD del SE. \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El usuario introduce la dirección IP en un cuadro de texto.                         
    \item El usuario introduce el puerto TCP en un cuadro de texto.
    \item El usuario pulsa un botón para confirmar los parámetros.
  \end{enumerate}}\\
  \textbf{Postcondición}        & La AW queda configurada para enviar comandos\\
                                & al SE.  \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si la dirección IP es errónea, la configuración no se realiza.  
    \item Si el puerto TCP es erróneo, la configuración no se realiza.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-2 Cambiar color RGB}{l l}{cu-2}
{\multicolumn{1}{l}
{Cu-2}                          & Cambiar color RGB \\}
{ 
  \textbf{Versión}              & 1.0       \\
  \textbf{Fecha}                & 2018-11   \\
  \textbf{Requisitos asociados} & RF-7 RF-8 \\
  \textbf{Descripción}          & El usuario pulsa un botón con el mismo \\ 
                                & color que desea iluminar los LED RGB.   \\
  \textbf{Precondición}         & El usuario ha seleccionado el SE. \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El usuario pulsa uno de los botones de colores disponibles.
    \item La AW envía un comando al SE indicando la operación.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE ilumina el color indicado.  \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si no se ha establecido el SE no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-3 Mostrar mensaje}{l l}{cu-3}
{\multicolumn{1}{l}
{Cu-3}                          & Mostrar mensaje \\}
{ 
  \textbf{Versión}              & 1.0       \\
  \textbf{Fecha}                & 2018-11   \\
  \textbf{Requisitos asociados} & RF-7 RF-9 \\
  \textbf{Descripción}          & El usuario muestra un mensaje en una de las \\
                                & líneas del LCD. \\ 
  \textbf{Precondición}         & El usuario ha seleccionado el SE.           \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El usuario escoge el cuadro de texto correspondiente a la línea
          del LCD deseada.
    \item El usuario escribe es ese cuadro la cadena de caracteres a mostrar.
    \item El usuario pulsa un botón para confirmar el envío de la cadena.
    \item La AW envía un comando al SE indicando la operación.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE muestra la cadena enviada.  \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si no se ha establecido el SE no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-4 Regular PWM}{l l}{cu-4}
{\multicolumn{1}{l}
{Cu-4}                          & Regular PWM \\}
{ 
  \textbf{Versión}              & 1.0        \\
  \textbf{Fecha}                & 2018-11    \\
  \textbf{Requisitos asociados} & RF-7 RF-10 \\
  \textbf{Descripción}          & El usuario usa un control deslizante para \\
                                & indicar la intensidad del brillo.         \\
  \textbf{Precondición}         & El usuario ha seleccionado el SE.         \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El usuario utiliza el control deslizante del mismo color          \\
          del LED a regular.
    \item La AW envía un comando al SE indicando la operación.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE regula la intensidad LED indicado.  \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si no se ha establecido el SE no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-5 Recibir comando}{l l}{cu-5}
{\multicolumn{1}{l}
{Cu-5}                          & Recibir comando \\}
{ 
  \textbf{Versión}              & 1.0        \\
  \textbf{Fecha}                & 2018-11    \\
  \textbf{Requisitos asociados} & RF-1 RF-2 \\
  \textbf{Descripción}          & El SE recibe un comando e interpreta su   \\
                                & contenido.                                \\
  \textbf{Precondición}         & La AW ha enviado un comando al SE.        \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El SE analiza el contenido de un paquete TCP y analiza el comando.
    \item El SE ordena realizar la acción solicitada.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE debe quedar a la espera de más comandos. \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si el comando no es válido no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-6 Actuar sobre LED RGB}{l l}{cu-6}
{\multicolumn{1}{l}
{Cu-6}                          & Actuar sobre LED RGB \\}
{ 
  \textbf{Versión}              & 1.0            \\
  \textbf{Fecha}                & 2018-11        \\
  \textbf{Requisitos asociados} & RF-1 RF-2 RF-3 \\
  \textbf{Descripción}          & El SE modifica los LED RGB.               \\
  \textbf{Precondición}         & El SE ha recibido un comando que ordena   \\
                                & iluminar un color determinado.            \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El SE identifica el color que se desea iluminar.
    \item El SE enciende o apaga los LED RGB necesarios para mostrar el color.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE debe quedar a la espera de más comandos. \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si el color no es válido no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Se considera el color negro como instrucción\\
                                & para apagar todos los LED. \\
}

\tablaSmallSinColores{CU-7 Actuar sobre LCD}{l l}{cu-7}
{\multicolumn{1}{l}
{Cu-7}                          & Actuar sobre LCD \\}
{ 
  \textbf{Versión}              & 1.0            \\
  \textbf{Fecha}                & 2018-11        \\
  \textbf{Requisitos asociados} & RF-1 RF-2 RF-4 \\
  \textbf{Descripción}          & El SE modifica el texto mostrado por el LCD.\\
  \textbf{Precondición}         & El SE ha recibido un comando que ordena     \\
                                & mostrar una cadena de caracteres en el LCD. \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El SE identifica la línea del LCD donde escribir el mensaje.
    \item El SE escribe la cadena de caracteres en dicha línea del LCD.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE debe quedar a la espera de más comandos. \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si la línea no es válida no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & Ninguno \\
}

\tablaSmallSinColores{CU-8 Actuar sobre LED PWM}{l l}{cu-8}
{\multicolumn{1}{l}
{Cu-8}                          & Actuar sobre LED PWM \\}
{ 
  \textbf{Versión}              & 1.0            \\
  \textbf{Fecha}                & 2018-11        \\
  \textbf{Requisitos asociados} & RF-1 RF-2 RF-5 \\
  \textbf{Descripción}          & El SE regula la intensidad del brillo       \\
                                & de uno de los LED PWM. \\
  \textbf{Precondición}         & El SE ha recibido un comando que ordena     \\
                                & regular la intensidad de los LED PWM.       \\
  \textbf{Acciones}             & \parbox{.5\textwidth}{\begin{enumerate}
    \item El SE identifica el LED PWM que hay que regular.
    \item El SE regula mediante PWM la intensidad del brillo del LED indicado.
  \end{enumerate}}\\
  \textbf{Postcondición}        & El SE debe quedar a la espera de más comandos. \\
  \textbf{Excepciones}          & \parbox{.5\textwidth}{\begin{itemize}
    \item Si el color del LED no es válido no se realiza ninguna acción.
    \item Si el valor de la intensidad no es válido no se realiza ninguna acción.
  \end{itemize}}\\
  \textbf{Importancia}          & Alta    \\
  \textbf{Comentarios}          & La intensidad está expresada en forma de porcentaje \\
                                & con valores desde 0\% hasta 100\%. \\
}
